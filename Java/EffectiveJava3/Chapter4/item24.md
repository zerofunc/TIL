# 아이템24. 멤버 클래스는 되도록 static으로 만들라
## 중첩클래스의 종류 네 가지
- 정적 멤버 클래스 // 내부 클래스에 해당 X
- (비정적) 멤버 클래스
- 익명 클래스
- 지역 클래스

## 정적 멤버 클래스
- 특징
    - 다른 클래스 안에 선언
    - 바깥 클래스의 private 멤버에도 접근 가능
    - 나머지는 일반 클래스와 같음
    - 다른 정적 멤버와 같은 접근 규칙을 적용받음
    - 흔히 public 도우미 클래스로 쓰임
- 정적 멤버 클래스와 비정적 멤버 클래스의 차이 
    - 구문상 차이 
        - static 여부
    - 의미상 차이 
        - 정적 멤버 클래스는 바깥 인스턴스와 독립적으로 존재 가능
- 개념상 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재 가능하면 정적 멤버 클래스로 생성
## 비정적 멤버 클래스
- 바깥 인스턴스 없이 생성 불가
- 바깥 클래스의 인스터스와 암묵적으로 연결 됨. 정규화된 this 사용가능 (클래스명.this)
- 바깥 인스턴스 사이와의 관계는 멤버 클래스가 인스턴스화 될 때 확립, 변경 불가
- 직접 _바깥 인스턴스의 클래스_.new MemberClass(args)를 호출해 수동으로 만듦
- 어댑터 정의시 자주 사용 됨
    - 뷰로 사용
    - ex) keySet, entrySet, values 반환 값
    - ex) Set,List 등 컬렉션 인터페이스의 반복자 구현
- 멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여서 정적 멤버 클래스로 만들어야 함
    - 메모리 낭비
    - 메모리 누수
## private 정적 멤버 클래스
- 주로 바깥 클랙스가 표현하는 객체의 한 부분(구성요소)을 나타낼 때 쓰임
- Map 구현체의 엔트리의 메서드들 (getKey, getValue, setValue)은 맵을 직접 사용 X
- static을 빠뜨리면 모든 엔트리가 바깥 맵으로의 참조를 갖게되어 자원 낭비
## 익명 클래스
- 쓰이는 시점에 선언과 동시에 인스턴스 생성됨
- 코드에 어디서든 만들 수 있음
- 비정적 문맥에서 사용될 때만 바깥 클래스의 인스턴스 참조 가능
- 정적 문맥에서라도 상수 변수 이외의 정적 멤버는 가질 수 없음
- 초기화된 final 기본 타입과 문자열 필드만 가질 수 있음
- 제약
    - 선언한 지점에서만 인스턴스 생성 가능
    - intanceof 검사나 클래스의 이름이 필요한 작업 수행 불가
    - 여러 인터페이스 구현 X
    - 인터페이스를 구현하는 동시에 다른 클래스를 상속 X
    - 익명 클래스를 사용하는 클라이언트는 그 익명 클래스가 상위 타입에서 상속한 멤버 외에는 호출 불가
    - 표현식 중간에 등장하므로 짧지 않으면 가독성이 떨어짐
- 람다가 역할을 대체함
- 정적 팩터리 메서드를 구현할 때 주로 쓰임
## 지역 클래스
- 가장 드물게 사용됨
- 지역변수 선언할 수 있는 곳에 어디서든 선언 가능
- 유효 범위 = 지역 변수의 유효 범위'
- 다른 중첩 클래스와의 공통점
    - 멤버 클래스처럼 이름이 있고 반복해서 사용 가능
    - 익명 클래스처럼 비정적 문맥에서 사용 될 때만 바깥 인스턴스 참조 가능
    - 정적 멤버는 가질 수 없고 가독성을 위해 짧게 작성해야 함
## 핵심 정리
- 중첩 클래스는 네 가지
- 각각 쓰임이 다름
- 메서드 밖엣거 사용하거나 메서드 안에 정의하기 너무 길면 멤버 클래스로 만듦
- 멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조하면 비정적으로
- 그렇지 않으면 정적으로 만듦
- 중첩 클래스가 한 메서드 안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 익명 클래스로
- 그렇지 않으면 지역클래스로 만듦